(this["webpackJsonpfrontend-reactjs"]=this["webpackJsonpfrontend-reactjs"]||[]).push([[0],{25:function(e,t,a){},33:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(12),l=a.n(r),i=(a(33),a(9)),o=a(4),u=a(11),s=a(27),m=a(10),d=a.n(m),p=a(13),E=a(1),f="https://api-project1-quocanh.herokuapp.com",h=Object(n.createContext)(),g=function(e){var t=Object(n.useState)(!1),a=Object(E.a)(t,2),r=a[0],l=a[1],i=Object(n.useState)({}),o=Object(E.a)(i,2),u=o[0],s=o[1];return Object(n.useEffect)((function(){Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/api/user/info"),{credentials:"include"});case 2:if(200!==(t=e.sent).status){e.next=9;break}return l(!0),e.next=7,t.json();case 7:a=e.sent,s(a);case 9:case"end":return e.stop()}}),e)})))()}),[r]),c.a.createElement(h.Provider,{value:{isLogin:r,setIsLogin:l,userInfo:u}},e.children)},b=function(e){var t=e.component,a=Object(s.a)(e,["component"]),r=Object(n.useContext)(h).isLogin;return c.a.createElement(o.b,Object.assign({},a,{render:function(e){var a=e.location;return r?c.a.createElement(t,null):c.a.createElement(o.a,{to:{pathname:"/login",state:{from:a}}})}}))},v=function(){var e=Object(n.useContext)(h).setIsLogin;return c.a.createElement("button",{onClick:function(t){t.preventDefault(),fetch("".concat(f,"/api/user/logout"),{credentials:"include"}).then((function(){e(!1),u.NotificationManager.success("\u0110\xe3 \u0111\u0103ng xu\u1ea5t!","Logout!")}))}},"Logout")},j=(a(42),function(){var e=Object(n.useContext)(h),t=e.isLogin,a=e.userInfo,r=!1;return t&&!a.isAdmin||(r=!0),c.a.createElement("div",{className:"Home"},c.a.createElement(i.b,{to:"/reports"},"Reports"),r&&c.a.createElement(i.b,{to:"/users"},"Users"),t?c.a.createElement(v,null):c.a.createElement(i.b,{to:"/Login"},"Login"))}),O=(a(43),a(44),function(e){var t=e.content,a=e.isActive,n=e.setModel;return c.a.createElement("div",{className:a?"Modal Modal-active":"Modal"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"content"},t),c.a.createElement("div",{className:"close-btn",onClick:function(){n({isActive:!1})}},"X")))}),y=(a(45),function(){return c.a.createElement("div",{className:"loader"},c.a.createElement("div",{className:"circle"},c.a.createElement("div",{className:"circle-1"}),c.a.createElement("div",{className:"circle-2"}),c.a.createElement("div",{className:"circle-3"})))}),C=function(e){var t=e.history,a=e.location,r=Object(n.useState)(""),l=Object(E.a)(r,2),s=l[0],m=l[1],g=Object(n.useState)(""),b=Object(E.a)(g,2),v=b[0],j=b[1],C=Object(n.useState)({isActive:!1}),S=Object(E.a)(C,2),N=S[0],k=S[1],w=Object(n.useState)(!1),x=Object(E.a)(w,2),P=x[0],L=x[1],T=Object(n.useContext)(h),F=T.isLogin,D=T.setIsLogin,M=(a.state||{from:{pathname:"/"}}).from,R=function(){var e=Object(p.a)(d.a.mark((function e(){var a,n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),a={email:s,password:v},e.next=4,fetch("".concat(f,"/api/user/login"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:return n=e.sent,e.next=7,n.text();case 7:if(c=e.sent,L(!1),200!==n.status){e.next=14;break}return D(!F),t.push(M),u.NotificationManager.success("\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng!","Successful!"),e.abrupt("return");case 14:k({isActive:!0,content:c});case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return F?c.a.createElement(o.a,{to:"/"}):c.a.createElement("div",{className:"login-form"},c.a.createElement("h2",null,"\u0110\u0103ng Nh\u1eadp"),c.a.createElement("form",null,c.a.createElement("label",{htmlFor:"email"},"Email"),c.a.createElement("input",{type:"email",name:"email",id:"email",onChange:function(e){m(e.target.value)},value:s}),c.a.createElement("label",{htmlFor:"password"},"M\u1eadt kh\u1ea9u"),c.a.createElement("input",{type:"password",name:"password",id:"password",onChange:function(e){j(e.target.value)},value:v}),c.a.createElement("div",{id:"submit-btn",onClick:R},"\u0110\u0103ng Nh\u1eadp"),c.a.createElement("p",null,"Ch\u01b0a c\xf3 t\xe0i kho\u1ea3n? ",c.a.createElement(i.b,{to:"/register"},"\u0110\u0103ng k\xfd"))),c.a.createElement(O,Object.assign({},N,{setModel:k})),P&&c.a.createElement(y,null))},S=(a(46),function(e){var t=e.history,a=Object(n.useState)(""),r=Object(E.a)(a,2),l=r[0],i=r[1],o=Object(n.useState)(""),s=Object(E.a)(o,2),m=s[0],h=s[1],g=Object(n.useState)(""),b=Object(E.a)(g,2),v=b[0],j=b[1],C=Object(n.useState)({isActive:!1}),S=Object(E.a)(C,2),N=S[0],k=S[1],w=Object(n.useState)(!1),x=Object(E.a)(w,2),P=x[0],L=x[1],T=function(){var e=Object(p.a)(d.a.mark((function e(){var a,n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),a={name:l,email:m,password:v},e.next=4,fetch("".concat(f,"/api/user/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:return n=e.sent,e.next=7,n.text();case 7:if(c=e.sent,L(!1),200!==n.status){e.next=13;break}return t.push("/login"),u.NotificationManager.success("\u0110\u0103ng k\xfd th\xe0nh c\xf4ng!","Successful!"),e.abrupt("return");case 13:k({isActive:!0,content:c});case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"Register"},c.a.createElement("h2",null,"\u0110\u0103ng k\xfd"),c.a.createElement("form",null,c.a.createElement("label",{htmlFor:"name"},"T\xean"),c.a.createElement("input",{type:"text",name:"name",id:"name",onChange:function(e){i(e.target.value)},value:l}),c.a.createElement("label",{htmlFor:"email"},"Email"),c.a.createElement("input",{type:"email",name:"email",id:"email",onChange:function(e){h(e.target.value)},value:m}),c.a.createElement("label",{htmlFor:"password"},"M\u1eadt kh\u1ea9u"),c.a.createElement("input",{type:"password",name:"password",id:"password",onChange:function(e){j(e.target.value)},value:v}),c.a.createElement("div",{id:"submit-btn",onClick:T},"\u0110\u0103ng K\xfd")),c.a.createElement(O,Object.assign({},N,{setModel:k})),P&&c.a.createElement(y,null))}),N=function(e){var t=e.getReports,a=Object(n.useState)(""),r=Object(E.a)(a,2),l=r[0],i=r[1],o=Object(n.useState)(null),u=Object(E.a)(o,2),s=u[0],m=u[1],d=Object(n.useState)("male"),p=Object(E.a)(d,2),h=p[0],g=p[1];return c.a.createElement("div",{className:"CreateReport"},c.a.createElement("label",{htmlFor:"name"},"H\u1ecd t\xean"),c.a.createElement("input",{type:"text",name:"name",id:"name",onChange:function(e){i(e.target.value)}}),c.a.createElement("label",{htmlFor:"birthday"},"Ng\xe0y sinh"),c.a.createElement("input",{type:"date",name:"birthday",id:"birthday",onChange:function(e){m(e.target.value)}}),c.a.createElement("label",{htmlFor:"sex"},"Gi\u1edbi t\xednh"),c.a.createElement("select",{id:"sex",name:"sex",defaultValue:h,onChange:function(e){g(e.target.value)}},c.a.createElement("option",{value:"nam"},"Nam"),c.a.createElement("option",{value:"n\u1eef"},"N\u1eef")),c.a.createElement("button",{onClick:function(e){e.defaultValue=!0;var a={name:l.toLowerCase(),sex:h,birthday:s};fetch("".concat(f,"/api/report/"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return t()}))}},"T\u1ea1o b\xe1o c\xe1o"))},k=a(15),w=a.n(k),x=(a(25),function(e){var t=e.currPage,a=e.reports,n=e.deleteReport,r=e.setCurrPage,l=e.limitPerPage,i=e.setLimit,o=a.data,u=a.countPages,s=function(e){return(e=(e=new Date(e)).toLocaleDateString()).split("/").join("-")};return c.a.createElement("div",{className:"List"},c.a.createElement("label",{htmlFor:"limit"},"S\u1ed1 d\xf2ng "),c.a.createElement("select",{id:"limit",value:l,onChange:function(e){i(e.target.value),r(0)}},c.a.createElement("option",{value:"10"},"10"),c.a.createElement("option",{value:"20"},"20"),c.a.createElement("option",{value:"30"},"30")),c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"STT"),c.a.createElement("th",null,"H\u1ecd t\xean"),c.a.createElement("th",null,"Gi\u1edbi t\xednh"),c.a.createElement("th",null,"Ng\xe0y sinh"),c.a.createElement("th",null,"Ng\xe0y t\u1ea1o"),c.a.createElement("th",null,"N\u1ed9i dung"),c.a.createElement("th",null))),c.a.createElement("tbody",null,o.map((function(e,a){return c.a.createElement("tr",{key:e._id},c.a.createElement("td",null,a+t*l),c.a.createElement("td",{style:{"text-transform":"capitalize"}},e.name),c.a.createElement("td",{style:{"text-transform":"capitalize"}},e.sex),c.a.createElement("td",null,s(e.birthday)),c.a.createElement("td",null,s(e.date)),c.a.createElement("td",null,e.content),c.a.createElement("td",null,c.a.createElement("button",{onClick:function(t){return n(t,e._id)}},"X\xf3a")))})))),c.a.createElement(w.a,{pageCount:u,pageRangeDisplayed:3,marginPagesDisplayed:2,onPageChange:function(e){var t=e.selected;r(t)},containerClassName:"pagination"}))}),P=function(e){var t=e.listField,a=e.setSearch,r=e.setCurrPage,l=t.list,i=t.dic,o=Object(n.useState)("name"),u=Object(E.a)(o,2),s=u[0],m=u[1],d=Object(n.useState)(""),p=Object(E.a)(d,2),f=p[0],h=p[1];return c.a.createElement("div",{className:"SearchForm"},c.a.createElement("label",{htmlFor:"keyword"},"T\xecm ki\u1ebfm: "),c.a.createElement("input",{id:"keyword",type:"birthday"===s?"date":"text",onChange:function(e){h(e.target.value)},value:f}),c.a.createElement("select",{id:"field",value:s,onChange:function(e){m(e.target.value),h("")}},l.map((function(e,t){return c.a.createElement("option",{key:t,value:i[t]},e)}))),c.a.createElement("button",{onClick:function(e){e.preventDefault(),a({field:s,keyword:f.toLowerCase()}),r(0)}},"T\xecm"))},L=function(){var e=Object(n.useState)({data:[],countPages:0}),t=Object(E.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(0),i=Object(E.a)(l,2),o=i[0],u=i[1],s=Object(n.useState)({field:"",keyword:""}),m=Object(E.a)(s,2),d=m[0],p=m[1],h=Object(n.useState)(10),g=Object(E.a)(h,2),b=g[0],v=g[1],j=function(){fetch("".concat(f,"/api/report?page=").concat(o,"&field=").concat(d.field,"&keyword=").concat(d.keyword,"&limit=").concat(b),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){r(e)}))};return Object(n.useEffect)((function(){fetch("".concat(f,"/api/report?page=").concat(o,"&field=").concat(d.field,"&keyword=").concat(d.keyword,"&limit=").concat(b),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){r(e)}))}),[d,o,b]),console.log("render"),c.a.createElement("div",{className:"Report"},c.a.createElement(N,{getReports:j}),c.a.createElement(P,{listField:{list:["H\u1ecd t\xean","Gi\u1edbi t\xednh","Ng\xe0y sinh"],dic:["name","sex","birthday"]},setSearch:p,setCurrPage:u}),c.a.createElement(x,{reports:a,currPage:o,deleteReport:function(e,t){e.defaultPrevented=!0;var a={_id:t};fetch("".concat(f,"/api/report/"),{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){return j()}))},setCurrPage:u,limitPerPage:b,setLimit:v}))},T=function(e){var t=e.currPage,a=e.users,n=e.deleteUser,r=e.setCurrPage,l=e.limitPerPage,i=e.setLimit,o=a.data,u=a.countPages;return c.a.createElement("div",{className:"List"},c.a.createElement("label",{htmlFor:"limit"},"S\u1ed1 d\xf2ng "),c.a.createElement("select",{id:"limit",value:l,onChange:function(e){i(e.target.value),r(0)}},c.a.createElement("option",{value:"10"},"10"),c.a.createElement("option",{value:"20"},"20"),c.a.createElement("option",{value:"30"},"30")),c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"STT"),c.a.createElement("th",null,"H\u1ecd t\xean"),c.a.createElement("th",null,"Email"),c.a.createElement("th",null,"Ng\xe0y t\u1ea1o"),c.a.createElement("th",null))),c.a.createElement("tbody",null,o.map((function(e,a){return c.a.createElement("tr",{key:e._id},c.a.createElement("td",null,a+t*l),c.a.createElement("td",null,e.name),c.a.createElement("td",null,e.email),c.a.createElement("td",null,(r=e.date,(r=(r=new Date(r)).toLocaleDateString()).split("/").join("-"))),c.a.createElement("td",null,c.a.createElement("button",{onClick:function(t){return n(t,e._id)}},"X\xf3a")));var r})))),c.a.createElement(w.a,{pageCount:u,pageRangeDisplayed:3,marginPagesDisplayed:2,onPageChange:function(e){var t=e.selected;r(t)},containerClassName:"pagination"}))},F=function(){var e=Object(n.useContext)(h).userInfo,t=Object(n.useState)({data:[],countPages:0}),a=Object(E.a)(t,2),r=a[0],l=a[1],i=Object(n.useState)(0),u=Object(E.a)(i,2),s=u[0],m=u[1],d=Object(n.useState)(10),p=Object(E.a)(d,2),g=p[0],b=p[1];return Object(n.useEffect)((function(){fetch("".concat(f,"/api/user/list?page=").concat(s,"&limit=").concat(g),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){l(e)}))}),[s,g]),c.a.createElement("div",{className:"Users"},e.isAdmin?c.a.createElement(T,{users:r,currPage:s,deleteUser:function(e,t){e.defaultPrevented=!0;var a={_id:t};fetch("".concat(f,"/api/user/delete"),{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){fetch("".concat(f,"/api/user/list?page=").concat(s,"&limit=").concat(g),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){l(e)}))}))},setCurrPage:m,limitPerPage:g,setLimit:b}):c.a.createElement(o.a,{to:{pathname:"/"}}))};a(47);var D=function(){return c.a.createElement(i.a,null,c.a.createElement("div",{className:"App"},c.a.createElement(o.d,null,c.a.createElement(o.b,{exact:!0,path:"/",component:j}),c.a.createElement(o.b,{path:"/login",component:C}),c.a.createElement(o.b,{path:"/register",component:S}),c.a.createElement(b,{exact:!0,path:"/reports",component:L}),c.a.createElement(b,{exact:!0,path:"/users",component:F})),c.a.createElement(u.NotificationContainer,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var M=a(51);l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(g,null,c.a.createElement(M.a,null,c.a.createElement(D,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[48,1,2]]]);
//# sourceMappingURL=main.86f6d417.chunk.js.map